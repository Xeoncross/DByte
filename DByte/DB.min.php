<?php
define('N',NULL);class DB{static$q,$c,$p,$i='`';static function column($a,$b=N,$c=0){if($d=DB::query($a,$b))return$d->fetchColumn($c);}static function row($a,$b=N){if($c=DB::query($a,$b))return$c->fetch();}static function pairs($a,$b=N){$c=array();if($d=DB::query($a,$b))while($e=$d->fetch(\PDO::FETCH_NUM))$c[$e[0]]=$e[1];return$c;}static function fetch($a,$b=N,$c=N){if(!$d=DB::query($a,$b))return;if($c===N)return$d->fetchAll();return$d->fetchAll(\PDO::FETCH_COLUMN,$c);}static function query($a,$b=N){$c=static::$d->prepare(DB::$e[]=strtr($a,'`',DB::$f));$c->execute($b);return$c;}static function insert($a,array$b){$c="INSERT INTO`$a`(`".implode('`,`',array_keys($b)).'`)VALUES('.rtrim(str_repeat('?,',count($b=array_values($b))),',').')';return DB::$d?DB::column($c.'RETURNING`id`',$b):(DB::query($c,$b)?static::$e->lastInsertId():N);}static function update($a,$b,$c,$d='id'){$e=implode('`=?,`',array_keys($b));if($f=DB::query("UPDATE`$a`SET`$e`=?WHERE`$d`=?",array_values($b+array($c))))return$f->rowCount();}}
